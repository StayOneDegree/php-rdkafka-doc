<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Purge messages handled by the producer</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="rdkafka.flush.html">« RdKafka::flush</a></li>
      <li style="float: right;"><a href="rdkafka.setloglevel.html">RdKafka::setLogLevel »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.rdkafka.html">RdKafka</a></li>
    <li>Purge messages handled by the producer</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="rdkafka.purge" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">RdKafka::purge</h1>
  <p class="verinfo">(PECL rdkafka &gt;= 4.0.0, librdkafka &gt;= 0.11.5)</p><p class="refpurpose"><span class="refname">RdKafka::purge</span> &mdash; <span class="dc-title">Purge messages handled by the producer</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-rdkafka.purge-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><strong>RdKafka::purge</strong></span>
    ( <span class="methodparam"><span class="type">integer</span> <code class="parameter">$purge_flags</code></span>
   ) : <span class="type">integer</span></div>

  <p class="para rdfs-comment">
   Purges messages handled by the producer.
   The application will need to call rd_kafka_poll() or rd_kafka_flush()
   afterwards to serve the delivery report callbacks of the purged messages.
   Messages purged from internal queues fail with the delivery report
   error code set to <strong><code>RD_KAFKA_RESP_ERR__PURGE_QUEUE</code></strong>, while purged messages that
   are in-flight to or from the broker will fail with the error code set to
   <strong><code>RD_KAFKA_RESP_ERR__PURGE_INFLIGHT</code></strong>.
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    Purging messages that are in-flight to or from the broker
    will ignore any sub-sequent acknowledgement for these messages
    received from the broker, effectively making it impossible
    for the application to know if the messages were successfully
    produced or not. This may result in duplicate messages if the
    application retries these messages at a later time.
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 parameters" id="refsect1-rdkafka.purge-parameters">
  <h3 class="title">Parameters</h3>
  <dl>

   
    <dt>
<code class="parameter">purge_flags</code> (<span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>)</dt>

    <dd>

     <p class="para">
      The following flags are available:
      <strong><code>RD_KAFKA_PURGE_F_QUEUE</code></strong> (purge internal queue),
      <strong><code>RD_KAFKA_PURGE_F_INFLIGHT</code></strong> (purge messages in-flight to or from the broker),
      <strong><code>RD_KAFKA_PURGE_F_NON_BLOCKING</code></strong> (don&#039;t wait)
     </p>
    </dd>

   
  </dl>

 </div>


 <div class="refsect1 returnvalues" id="refsect1-rdkafka.purge-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns <strong><code>RD_KAFKA_RESP_ERR_NO_ERROR</code></strong> on success,
   <strong><code>RD_KAFKA_RESP_ERR__INVALID_ARG</code></strong> for invalid purge flags,
   <strong><code>RD_KAFKA_RESP_ERR__NOT_IMPLEMENTED</code></strong> if called on a non-producer instance
  </p>
 </div>


</div></div></div></body></html>